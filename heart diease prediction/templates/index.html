<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Heart Disease Prediction</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="/static/css/styles.css">
    <link rel="icon" type="image/x-icon" href="/static/images/favicon.ico">
</head>
<body>
    <div class="container">
        <div class="header text-center">
            <h1><i class="bi bi-heart-pulse"></i> Heart Disease Risk Prediction</h1>
            <p>Predict your 10-year risk of coronary heart disease (CHD)</p>
        </div>
        
        <ul class="nav nav-pills mb-4 justify-content-center">
            <li class="nav-item">
                <a class="nav-link active" href="/"><i class="bi bi-calculator"></i> Prediction Tool</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/dashboard"><i class="bi bi-speedometer2"></i> Dashboard</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/visualizations"><i class="bi bi-graph-up"></i> Data Insights</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/history"><i class="bi bi-clock-history"></i> History</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/about"><i class="bi bi-info-circle"></i> About</a>
            </li>
        </ul>
        
        <div class="row">
            <div class="col-lg-8">
                <div class="form-container">
                    <h3 class="mb-4 text-center">Enter Your Health Information</h3>
                    
                    <form id="prediction-form">
                        <!-- Personal Information -->
                        <div class="card mb-4">
                            <div class="card-header bg-danger text-white">
                                <i class="bi bi-person"></i> Personal Information
                            </div>
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-4 mb-3">
                                        <label for="age" class="form-label">Age</label>
                                        <input type="number" class="form-control" id="age" required min="30" max="80" 
                                               data-bs-toggle="tooltip" data-bs-placement="top" 
                                               title="Age is a significant risk factor for heart disease">
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <label for="sex" class="form-label">Sex</label>
                                        <select class="form-select" id="sex" required
                                                data-bs-toggle="tooltip" data-bs-placement="top" 
                                                title="Men are at higher risk of heart disease than women">
                                            <option value="">Select</option>
                                            <option value="1">Male</option>
                                            <option value="0">Female</option>
                                        </select>
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <label for="education" class="form-label">Education Level</label>
                                        <select class="form-select" id="education">
                                            <option value="">Select</option>
                                            <option value="1">Some High School</option>
                                            <option value="2">High School or GED</option>
                                            <option value="3">Some College or Vocational School</option>
                                            <option value="4">College</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="height" class="form-label">Height (cm)</label>
                                        <input type="number" class="form-control" id="height" min="120" max="220">
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="weight" class="form-label">Weight (kg)</label>
                                        <input type="number" class="form-control" id="weight" min="30" max="200">
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="BMI" class="form-label">BMI (Body Mass Index)</label>
                                    <input type="number" class="form-control" id="BMI" step="0.01" min="15" max="50" readonly
                                           data-bs-toggle="tooltip" data-bs-placement="top" 
                                           title="BMI > 25 is overweight, BMI > 30 is obese">
                                    <div class="form-text">BMI will be calculated automatically from height and weight</div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Medical History -->
                        <div class="card mb-4">
                            <div class="card-header bg-danger text-white">
                                <i class="bi bi-clipboard2-pulse"></i> Medical History
                            </div>
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-4 mb-3">
                                        <label for="prevalentStroke" class="form-label">Previous Stroke</label>
                                        <select class="form-select" id="prevalentStroke" required
                                                data-bs-toggle="tooltip" data-bs-placement="top" 
                                                title="Previous stroke significantly increases heart disease risk">
                                            <option value="">Select</option>
                                            <option value="1">Yes</option>
                                            <option value="0">No</option>
                                        </select>
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <label for="prevalentHyp" class="form-label">Hypertension</label>
                                        <select class="form-select" id="prevalentHyp" required
                                                data-bs-toggle="tooltip" data-bs-placement="top" 
                                                title="Hypertension is a major risk factor for heart disease">
                                            <option value="">Select</option>
                                            <option value="1">Yes</option>
                                            <option value="0">No</option>
                                        </select>
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <label for="diabetes" class="form-label">Diabetes</label>
                                        <select class="form-select" id="diabetes" required
                                                data-bs-toggle="tooltip" data-bs-placement="top" 
                                                title="Diabetes increases heart disease risk">
                                            <option value="">Select</option>
                                            <option value="1">Yes</option>
                                            <option value="0">No</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="BPMeds" class="form-label">Blood Pressure Medication</label>
                                        <select class="form-select" id="BPMeds" required>
                                            <option value="">Select</option>
                                            <option value="1">Yes</option>
                                            <option value="0">No</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="heartRate" class="form-label">Resting Heart Rate (bpm)</label>
                                        <input type="number" class="form-control" id="heartRate" required min="40" max="200"
                                               data-bs-toggle="tooltip" data-bs-placement="top" 
                                               title="Normal resting heart rate is 60-100 bpm">
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Lifestyle Factors -->
                        <div class="card mb-4">
                            <div class="card-header bg-danger text-white">
                                <i class="bi bi-activity"></i> Lifestyle Factors
                            </div>
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="is_smoking" class="form-label">Current Smoker</label>
                                        <select class="form-select" id="is_smoking" required
                                                data-bs-toggle="tooltip" data-bs-placement="top" 
                                                title="Smoking is a major risk factor for heart disease">
                                            <option value="">Select</option>
                                            <option value="1">Yes</option>
                                            <option value="0">No</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="cigsPerDay" class="form-label">Cigarettes Per Day</label>
                                        <input type="number" class="form-control" id="cigsPerDay" min="0" max="100" value="0"
                                               data-bs-toggle="tooltip" data-bs-placement="top" 
                                               title="More cigarettes per day increases heart disease risk">
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Clinical Measurements -->
                        <div class="card mb-4">
                            <div class="card-header bg-danger text-white">
                                <i class="bi bi-heart-pulse"></i> Clinical Measurements
                            </div>
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-4 mb-3">
                                        <label for="sysBP" class="form-label">Systolic BP (mmHg)</label>
                                        <input type="number" class="form-control" id="sysBP" required min="80" max="300"
                                               data-bs-toggle="tooltip" data-bs-placement="top" 
                                               title="Normal systolic BP is less than 120 mmHg">
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <label for="diaBP" class="form-label">Diastolic BP (mmHg)</label>
                                        <input type="number" class="form-control" id="diaBP" required min="40" max="200"
                                               data-bs-toggle="tooltip" data-bs-placement="top" 
                                               title="Normal diastolic BP is less than 80 mmHg">
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <label for="totChol" class="form-label">Total Cholesterol (mg/dL)</label>
                                        <input type="number" class="form-control" id="totChol" required min="100" max="600"
                                               data-bs-toggle="tooltip" data-bs-placement="top" 
                                               title="Desirable cholesterol is less than 200 mg/dL">
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="glucose" class="form-label">Glucose Level (mg/dL)</label>
                                    <input type="number" class="form-control" id="glucose" min="40" max="400"
                                           data-bs-toggle="tooltip" data-bs-placement="top" 
                                           title="Normal fasting glucose is less than 100 mg/dL">
                                </div>
                            </div>
                        </div>
                        
                        <div class="d-grid gap-2">
                            <button type="submit" class="btn btn-danger btn-lg">
                                <i class="bi bi-heart-pulse"></i> Predict Heart Disease Risk
                            </button>
                        </div>
                    </form>
                    
                    <div id="prediction-result" class="prediction-result text-center">
                        <h4 id="result-message"></h4>
                        <p id="result-details"></p>
                        <div id="risk-factors" class="mt-4" style="display: none;"></div>
                    </div>
                    
                    <div id="loading" class="spinner-container" style="display: none;">
                        <div class="spinner-border text-danger" role="status">
                            <span class="visually-hidden">Loading...</span>
                        </div>
                        <p class="mt-2">Processing your data...</p>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-4">
                <div class="content-container">
                    <h4 class="mb-3"><i class="bi bi-info-circle"></i> Heart Disease Risk Factors</h4>
                    <p>Heart disease is influenced by many factors. Some you can control, others you cannot.</p>
                    
                    <div class="accordion" id="riskFactorsAccordion">
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="headingOne">
                                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                                    <i class="bi bi-person me-2"></i> Non-modifiable Risk Factors
                                </button>
                            </h2>
                            <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#riskFactorsAccordion">
                                <div class="accordion-body">
                                    <ul class="list-group list-group-flush">
                                        <li class="list-group-item"><strong>Age:</strong> Risk increases with age</li>
                                        <li class="list-group-item"><strong>Sex:</strong> Men are at higher risk than women</li>
                                        <li class="list-group-item"><strong>Family history:</strong> Genetic factors play a role</li>
                                        <li class="list-group-item"><strong>Ethnicity:</strong> Some ethnic groups have higher risk</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="headingTwo">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                                    <i class="bi bi-activity me-2"></i> Modifiable Risk Factors
                                </button>
                            </h2>
                            <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#riskFactorsAccordion">
                                <div class="accordion-body">
                                    <ul class="list-group list-group-flush">
                                        <li class="list-group-item"><strong>Smoking:</strong> Significantly increases risk</li>
                                        <li class="list-group-item"><strong>High blood pressure:</strong> Damages arteries</li>
                                        <li class="list-group-item"><strong>High cholesterol:</strong> Leads to plaque buildup</li>
                                        <li class="list-group-item"><strong>Diabetes:</strong> Increases risk of heart disease</li>
                                        <li class="list-group-item"><strong>Obesity:</strong> Strains the heart</li>
                                        <li class="list-group-item"><strong>Physical inactivity:</strong> Weakens the heart</li>
                                        <li class="list-group-item"><strong>Poor diet:</strong> Contributes to other risk factors</li>
                                        <li class="list-group-item"><strong>Stress:</strong> Can damage arteries and heart</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-4">
                        <h5><i class="bi bi-graph-up"></i> Dataset Statistics</h5>
                        <div class="row">
                            <div class="col-6">
                                <div class="card text-center mb-3">
                                    <div class="card-body">
                                        <h5 class="card-title">{{ stats.get('positive_rate', 0) * 100 | round(1) }}%</h5>
                                        <p class="card-text text-muted">Heart Disease Rate</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="card text-center mb-3">
                                    <div class="card-body">
                                        <h5 class="card-title">{{ stats.get('avg_age', 0) | round(1) }}</h5>
                                        <p class="card-text text-muted">Average Age</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="text-center mt-3">
                            <a href="/dashboard" class="btn btn-outline-danger btn-sm">
                                <i class="bi bi-bar-chart"></i> View Full Dashboard
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <footer class="mt-5 text-center text-muted">
        <div class="container">
            <div class="row">
                <div class="col-md-4">
                    <h5><i class="bi bi-heart-pulse"></i> Heart Disease Prediction</h5>
                    <p class="small">A machine learning tool to predict 10-year risk of coronary heart disease</p>
                </div>
                <div class="col-md-4">
                    <h5><i class="bi bi-shield-check"></i> Disclaimer</h5>
                    <p class="small">This tool is for educational purposes only and should not replace medical advice</p>
                </div>
                <div class="col-md-4">
                    <h5><i class="bi bi-link-45deg"></i> Quick Links</h5>
                    <ul class="list-unstyled">
                        <li><a href="/about" class="text-muted">About</a></li>
                        <li><a href="/visualizations" class="text-muted">Data Insights</a></li>
                        <li><a href="/dashboard" class="text-muted">Dashboard</a></li>
                    </ul>
                </div>
            </div>
            <hr>
            <p>&copy; 2023 Heart Disease Prediction Tool</p>
        </div>
    </footer>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/static/js/app.js"></script>
</body>
</html>